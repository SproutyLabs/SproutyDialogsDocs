"use strict";(globalThis.webpackChunksprouty_dialogs_docs=globalThis.webpackChunksprouty_dialogs_docs||[]).push([[3346],{1599:(e,a,s)=>{s.r(a),s.d(a,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"dialogues/using-dialogues","title":"Using Dialogues","description":"Once you have created a dialogue, you can use it in different ways, as we have already seen in the create a dialogue section, but there are more details you should keep in mind.","source":"@site/docs/dialogues/using-dialogues.md","sourceDirName":"dialogues","slug":"/dialogues/using-dialogues","permalink":"/SproutyDialogsDocs/docs/dialogues/using-dialogues","draft":false,"unlisted":false,"editUrl":"https://github.com/SproutyLabs/SproutyDialogsDocs/tree/main/docs/dialogues/using-dialogues.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Dialogues & Text","permalink":"/SproutyDialogsDocs/docs/category/dialogues--text"},"next":{"title":"Dialog Boxes","permalink":"/SproutyDialogsDocs/docs/dialogues/dialog-boxes"}}');var n=s(74848),t=s(28453);const r={sidebar_position:1},i="Using Dialogues",d={},l=[{value:"How to use a dialogue",id:"how-to-use-a-dialogue",level:2},{value:"Using dialog players (Recommended)",id:"using-dialog-players-recommended",level:3},{value:"Using SproutyDialogs autoload",id:"using-sproutydialogs-autoload",level:3},{value:"About dialogue resources",id:"about-dialogue-resources",level:2},{value:"Override display parents",id:"override-display-parents",level:2},{value:"Using DialogPlayer signals",id:"using-dialogplayer-signals",level:2}];function c(e){const a={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"using-dialogues",children:"Using Dialogues"})}),"\n",(0,n.jsxs)(a.p,{children:["Once you have created a dialogue, you can use it in different ways, as we have already seen in the ",(0,n.jsx)(a.a,{href:"/docs/getting-started/create-a-dialogue",children:"create a dialogue"})," section, but there are more details you should keep in mind."]}),"\n",(0,n.jsx)(a.h2,{id:"how-to-use-a-dialogue",children:"How to use a dialogue"}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsxs)(a.p,{children:["To use the dialogues from Sprouty Dialogs in your game, as we have already seen in the ",(0,n.jsx)(a.a,{href:"/docs/getting-started/create-a-dialogue#using-dialogues-in-your-game",children:"create a dialogue"})," section, we have the two following options."]}),"\n",(0,n.jsx)(a.h3,{id:"using-dialog-players-recommended",children:"Using dialog players (Recommended)"}),"\n",(0,n.jsxs)(a.p,{children:["The recommended way to run your dialogues is using dialog players. To use a ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/nodes/dialog-player",children:"DialogPlayer"})," node, first you need to ",(0,n.jsx)(a.strong,{children:"add it to the scene"})," where you want to run the dialogue."]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"Add Dialog Player",src:s(78371).A+"",width:"2870",height:"1580"})}),"\n",(0,n.jsxs)(a.p,{children:["Then, you must assign the ",(0,n.jsx)(a.code,{children:"Dialog Data"})," or dialogue data file where your dialogue is."]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"Select Dialogue Data",src:s(42547).A+"",width:"2870",height:"1580"})}),"\n",(0,n.jsxs)(a.p,{children:["When you select a file, the inspector automatically going to update and now you will see some settings for the ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/nodes/dialog-player",children:"DialogPlayer"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["You must choose the ",(0,n.jsx)(a.strong,{children:"dialogue tree ID of the dialogue you want to play"})," from the ",(0,n.jsx)(a.code,{children:"Start ID"})," dropdown; otherwise, the player will not know which dialogue tree to run."]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"Select Start ID",src:s(83088).A+"",width:"2870",height:"1580"})}),"\n",(0,n.jsxs)(a.p,{children:["Now that you have your dialog player configured, you can call the dialogue from code, using the ",(0,n.jsx)(a.a,{href:"/docs/class-reference/nodes/dialog-player#start-method",children:"start"}),"() method from the ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/nodes/dialog-player",children:"DialogPlayer"})," node."]}),"\n",(0,n.jsxs)(a.p,{children:["For example, we can add a script to the ",(0,n.jsx)(a.code,{children:"main"})," node and add a reference to the ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/nodes/dialog-player",children:"DialogPlayer"})," that we create before to then call the ",(0,n.jsx)(a.a,{href:"/docs/class-reference/nodes/dialog-player#start-method",children:"start"}),"() method where we want in the script."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",metastring:'title="main.gd" showLineNumbers',children:"extends Node2D\n\n@onready var dialog_player : DialogPlayer = $DialogPlayer\n\nfunc _ready() -> void:\n\tdialog_player.start()\n\n"})}),"\n",(0,n.jsxs)(a.p,{children:["In this case, we run the dialog in the ",(0,n.jsx)(a.a,{href:"https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-private-method-ready",children:"_ready"}),"() method of the ",(0,n.jsx)(a.code,{children:"main"})," node or when the scene begins again, so when you run the scene you will see the dialogue."]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"Play from Code",src:s(53548).A+"",width:"2870",height:"1580"})}),"\n",(0,n.jsx)(a.p,{children:"And that's it! So easy right? \ud83e\udd73"}),"\n",(0,n.jsxs)(a.p,{children:["You can also, create a dialog player node from code and use it in the same way, but you must ",(0,n.jsx)(a.strong,{children:"first add it to the tree"})," and ",(0,n.jsx)(a.strong,{children:"configure the dialogue data file and start ID"})," before running it."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",metastring:'title="main.gd" showLineNumbers',children:'extends Node2D\n\nvar dialog_data := load("res://dialogues/my_dialogue.tres")\n\nfunc _ready() -> void:\n\tvar dialog_player = DialogPlayer.new()\n\tadd_child(dialog_player)\n\n\tdialog_player.set_dialog(dialog_data, "FIRST")\n\tdialog_player.start()\n\n'})}),"\n",(0,n.jsxs)(a.admonition,{title:"Important",type:"info",children:[(0,n.jsxs)(a.p,{children:["All the resources needed for the dialog will be loaded at once when the ",(0,n.jsx)(a.a,{href:"/docs/class-reference/nodes/dialog-player#set-dialog-method",children:"set_dialog"}),"() method is called, which can cause ",(0,n.jsx)(a.strong,{children:"slowdowns if large resources need to be loaded"}),"."]}),(0,n.jsxs)(a.p,{children:["For more details see the ",(0,n.jsx)(a.a,{href:"#about-dialogue-resources",children:"about dialogue resources"})," section."]})]}),"\n",(0,n.jsx)(a.h3,{id:"using-sproutydialogs-autoload",children:"Using SproutyDialogs autoload"}),"\n",(0,n.jsxs)(a.p,{children:["Otherwise, instead of create a DialogPlayer node in the scene, you can play a dialogue using the Sprouty Dialogs Autoload. You can call the ",(0,n.jsx)(a.a,{href:"/docs/class-reference/core/sprouty-dialogs-manager#start-dialog-method",children:"start_dialog"}),"() method from the ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/core/sprouty-dialogs-manager",children:"SproutyDialogs"})," autoload passing the dialogue data resource and the ID of the dialogue tree you want to run."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",metastring:'title="main.gd" showLineNumbers',children:'extends Node2D\n\nvar dialog_data := load("res://dialogues/my_dialogue.tres")\n\nfunc _ready() -> void:\n\tSproutyDialogs.start_dialog(dialog_data, "FIRST")\n\n'})}),"\n",(0,n.jsx)(a.p,{children:"And in this way you can also see the dialogue when you run the scene."}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"Play from Autoload",src:s(94086).A+"",width:"2870",height:"1580"})}),"\n",(0,n.jsxs)(a.admonition,{title:"Important",type:"info",children:[(0,n.jsxs)(a.p,{children:["This method also loads all the resources needed for the dialogue at once when the method is called, so may cause a ",(0,n.jsx)(a.strong,{children:"slowdown if you have large resources to load"}),"."]}),(0,n.jsxs)(a.p,{children:["For more details see the ",(0,n.jsx)(a.a,{href:"#about-dialogue-resources",children:"about dialogue resources"})," section."]})]}),"\n",(0,n.jsx)(a.h2,{id:"about-dialogue-resources",children:"About dialogue resources"}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsxs)(a.p,{children:["When you set a ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/nodes/dialog-player",children:"DialogPlayer"})," node in a scene to run a dialogue, this node will load all the resources needed (dialog boxes, characters, portraits, etc) on ready, using the ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/utils/resource-manager",children:"Resource Manager"})," singleton."]}),"\n",(0,n.jsxs)(a.p,{children:["The ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/utils/resource-manager",children:"Resource Manager"})," is going to keep track of the resources required for all the dialogues that will run in the current scene, which means, the resources needed by ",(0,n.jsx)(a.strong,{children:"all the dialog players in the scene"}),". The resource manager ",(0,n.jsx)(a.strong,{children:"ensures that each resource is only loaded once"}),", even if more than one dialog player uses it."]}),"\n",(0,n.jsx)(a.mermaid,{value:'graph TD;\n\tsubgraph OnReady ["_on_ready()"]\n\t\tsubgraph OnScene ["DialogPlayers on scene"]\n\t\tDialogPlayer1\n\t\tDialogPlayer2\n\t\tDialogPlayer3\n\t\tDialogPlayer4\n\t\tend\n        DialogPlayer1 e1@--Call to load<br/>resources--\x3eResourceManager\n    \tDialogPlayer2 e2@--Call to load<br/>resources--\x3eResourceManager\n   \t\tDialogPlayer3 e3@--Call to load<br/>resources--\x3eResourceManager\n    \tDialogPlayer4 e4@--Call to load<br/>resources--\x3eResourceManager\n\t\te1@{ animate: slow }\n\t\te2@{ animate: slow }\n\t\te3@{ animate: slow }\n\t\te4@{ animate: slow }\n    end'}),"\n",(0,n.jsxs)(a.p,{children:["This way, resources are ",(0,n.jsx)(a.strong,{children:"loaded only once at the start of the scene"})," and then ",(0,n.jsx)(a.strong,{children:"instantiated when needed in a dialog"}),". Furthermore, they are ",(0,n.jsx)(a.strong,{children:"destroyed when they are no longer needed"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["For this reason, care must be taken when loading ",(0,n.jsx)(a.strong,{children:"large resources, such as complex portrait scenes"}),". If you set the ",(0,n.jsx)(a.strong,{children:"dialog players from the code or use the Sprouty Dialogs autoload"}),", the resources will be loaded when you call the ",(0,n.jsx)(a.a,{href:"/docs/class-reference/nodes/dialog-player#set-dialog-method",children:"set_dialog"}),"() or ",(0,n.jsx)(a.a,{href:"/docs/class-reference/core/sprouty-dialogs-manager#start-dialog-method",children:"start_dialog"}),"() methods."]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsxs)(a.em,{children:["If you call these methods during runtime, there will be a ",(0,n.jsx)(a.strong,{children:"slowdown due to resource loading"}),". However, if you have set the ",(0,n.jsx)(a.strong,{children:"DialogPlayer node directly in the scene"}),", you will ",(0,n.jsx)(a.strong,{children:"ensure that resources are loaded when the scene starts"}),"."]})}),"\n",(0,n.jsx)(a.h2,{id:"override-display-parents",children:"Override display parents"}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsxs)(a.p,{children:["You can override the parents of your dialog boxes and portraits for each character in a dialogue to ",(0,n.jsx)(a.strong,{children:"change the position of the dialog box or portrait on screen"})," for a given dialogue, for example, or wharever you want. This allows more flexibility to display the dialogue components, for example, to use ",(0,n.jsx)(a.strong,{children:"dialogue bubbles as dialog boxes that follow the position of the NPCs"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["When you assign a dialogue data file that use characters in a ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/nodes/dialog-player",children:"DialogPlayer"})," node, the inspector will add a new group of properties called ",(0,n.jsx)(a.code,{children:"Override Display Parents"}),"."]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"Dialog Box Inspector",src:s(85677).A+"",width:"620",height:"656"})}),"\n",(0,n.jsxs)(a.p,{children:["Here you will find ",(0,n.jsx)(a.strong,{children:"a section for each character in the dialogues"})," of the selected dialog data, where you can ",(0,n.jsx)(a.strong,{children:"assign any nodes in the scene"})," to override the parent of the character portraits or dialog box."]}),"\n",(0,n.jsxs)(a.p,{children:["Also, you can set this from code. You must ",(0,n.jsx)(a.strong,{children:"define a dictionary"})," of the new portraits or dialog box parents, where ",(0,n.jsx)(a.strong,{children:"each key is the character's key name (file name), and the value is the desired new parent node"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",metastring:'title="main.gd" showLineNumbers',children:'extends Node2D\n\nvar dialog_data := load("res://dialogues/example.tres")\nvar portrait_parents : Dictionary = {\n\t"sprouty": get_node("PortraitParent")\n}\nvar dialog_box_parents : Dictionary = {\n\t"sprouty": get_node("DialogBoxParent")\n}\n'})}),"\n",(0,n.jsxs)(a.p,{children:["You can then pass these dictionaries to the ",(0,n.jsx)(a.a,{href:"/docs/class-reference/nodes/dialog-player#set-dialog-method",children:"set_dialog"}),"() method in the dialog player node."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",metastring:'title="main.gd (Using DialogPlayer)" showLineNumbers=10',children:'func _ready() -> void:\n\tvar dialog_player = DialogPlayer.new()\n\tadd_child(dialog_player)\n\n\tdialog_player.set_dialog(dialog_data, "EXAMPLE", portraits_parents, dialog_box_parents)\n\tdialog_player.start()\n'})}),"\n",(0,n.jsxs)(a.p,{children:["Or you can pass them in the ",(0,n.jsx)(a.a,{href:"/docs/class-reference/core/sprouty-dialogs-manager#start-dialog-method",children:"start_dialog"}),"() method when you use the Sprouty Dialogs autoload."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",metastring:'title="main.gd (Using the SproutyDialogs autoload)" showLineNumbers=10',children:'func _ready() -> void:\n\tSproutyDialogs.start_dialog(dialog_data, "EXAMPLE", portraits_parents, dialog_box_parents)\n'})}),"\n",(0,n.jsx)(a.h2,{id:"using-dialogplayer-signals",children:"Using DialogPlayer signals"}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsxs)(a.p,{children:["The ",(0,n.jsx)(a.a,{href:"/SproutyDialogsDocs/docs/class-reference/nodes/dialog-player",children:"DialogPlayer"})," nodes have some signals that you can use to handle the state of the dialogue. This signals are the following:"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",children:"## Emitted when the dialog starts.\nsignal dialog_started()\n## Emitted when the dialog is paused.\nsignal dialog_paused()\n## Emitted when the dialog is resumed.\nsignal dialog_resumed()\n## Emitted when the dialog is ended.\nsignal dialog_ended()\n"})}),"\n",(0,n.jsx)(a.p,{children:"Also, there are two special signals:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",children:"## Emitted when a dialog option is selected.\nsignal option_selected(option_index: int, option_dialog: Dictionary)\n## Emitted when a signal event is emitted.\nsignal signal_event(argument: String)\n"})}),"\n",(0,n.jsxs)(a.p,{children:["First, the ",(0,n.jsx)(a.code,{children:"option_selected"})," signal is emitted when an ",(0,n.jsx)(a.strong,{children:"option is selected in the dialogue"})," and returns the option index and a dictionary with the dialogue and translations of the selected option in the following format:"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{children:'{\n\t"en" : "This is the option in Engligh"\n\t"es" :" Esta es la opci\xf3n en Espa\xf1ol"\n}\n'})}),"\n",(0,n.jsxs)(a.p,{children:["For the other hand, the ",(0,n.jsx)(a.code,{children:"signal_event"})," signal is emitted when a ",(0,n.jsx)(a.a,{href:"/docs/dialogues/event-nodes#signal-node",children:"Signal Node"})," is trigger in the dialogue tree. This signal returns the argument that you give to the event node to do wharever you need with it."]}),"\n",(0,n.jsxs)(a.p,{children:["You can also handle the ",(0,n.jsx)(a.strong,{children:"same signals from the Sprouty Dialogs autoload"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-gdscript",metastring:'title="main.gd" showLineNumbers',children:'extends Node2D\n\nvar dialog_data := load("res://dialogues/example.tres")\n\nfunc _ready() -> void:\n\tSproutyDialogs.dialog_ended.connect(_on_dialog_ended)\n\tSproutyDialogs.start_dialog(dialog_data, "EXAMPLE")\n\nfunc _on_dialog_ended() -> void:\n\tSproutyDialogs.dialog_ended.disconnect(_on_dialog_ended)\n\tprint("The dialogue has ended!")\n\n'})})]})}function h(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,a,s)=>{s.d(a,{R:()=>r,x:()=>i});var o=s(96540);const n={},t=o.createContext(n);function r(e){const a=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),o.createElement(t.Provider,{value:a},e.children)}},42547:(e,a,s)=>{s.d(a,{A:()=>o});const o=s.p+"assets/images/select_dialogue_data-d2e6cf902a400d22d478658173b271c4.png"},53548:(e,a,s)=>{s.d(a,{A:()=>o});const o=s.p+"assets/images/play_from_code-b1599b4fb9728e6e468a8be9f95138c2.png"},78371:(e,a,s)=>{s.d(a,{A:()=>o});const o=s.p+"assets/images/add_dialog_player-b6702ea27e9d699757a577c566ebeaae.png"},83088:(e,a,s)=>{s.d(a,{A:()=>o});const o=s.p+"assets/images/select_start_id-01749d749484dfde49f1aee92911dec9.png"},85677:(e,a,s)=>{s.d(a,{A:()=>o});const o=s.p+"assets/images/override_display_parents-8410f9d0c8242a82113015df25dd02f5.png"},94086:(e,a,s)=>{s.d(a,{A:()=>o});const o=s.p+"assets/images/play_from_autoload-551dd80f3ef065b9b9b8e92c95c1b5c7.png"}}]);